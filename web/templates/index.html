<style>
  /* Estado inicial de los elementos a animar */
  .animate-on-scroll {
    opacity: 0;
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }
  .fade-in-left {
    transform: translateX(-40px);
  }
  .fade-in-right {
    transform: translateX(40px);
  }
  .fade-in-up {
    transform: translateY(40px);
  }

  /* Estado final (visible) cuando el elemento entra en la pantalla */
  .animate-on-scroll.visible {
    opacity: 1;
    transform: translate(0, 0);
  }
</style>

<div class="container-fluid m-0 p-0" id="hero">
    <div class="container-fluid pt-3 d-flex flex-column justify-content-end align-items-center" >
        <div class="row" ></div>
        <div class="container-xl m-2" id="alert-container">
            {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
          <div class="alert alert-dismissible alert-warning ">
            <div class="row">
                <div class="col-lg-8 col-10 text-start">
                    <h4 class="alert-heading">Atención!</h4>
                     <p class="mb-0" > {{ message }} </p>
                </div>
                <div class="col-lg-4 col-2">
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    
                </div>
                
            </div>
        </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
        </div>
            
        <div class="row mt-5 pt-5">
            <svg width="289.746" height="75" viewBox="0 0 289.746 73.535" xmlns="http://www.w3.org/2000/svg">
                <g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#000" stroke-width="0.25mm" fill="#000" style="stroke:#000;stroke-width:0.25mm;fill:#000">
                    <path d="M 160.547 1.27 L 185.547 73.145 L 173.438 73.145 L 154.785 19.238 L 135.938 73.145 L 123.73 73.145 L 148.926 1.27 L 160.547 1.27 Z M 264.746 1.27 L 289.746 73.145 L 277.637 73.145 L 258.984 19.238 L 240.137 73.145 L 227.93 73.145 L 253.125 1.27 L 264.746 1.27 Z M 73.242 73.535 L 50.879 1.172 L 64.258 1.172 L 79.395 57.617 L 79.395 73.535 L 73.242 73.535 Z M 83.398 54.492 L 98.633 1.172 L 111.914 1.172 L 88.477 73.535 L 83.398 73.535 L 83.398 54.492 Z M 212.793 1.172 L 212.793 73.145 L 200.879 73.145 L 200.879 1.172 L 212.793 1.172 Z M 22.852 43.359 L 22.852 31.934 A 232.626 232.626 0 0 1 29.023 34.852 A 254.083 254.083 0 0 1 29.443 35.059 Q 32.813 36.719 35.547 39.111 A 19.378 19.378 0 0 1 39.928 44.709 A 21.97 21.97 0 0 1 40.039 44.922 A 14.888 14.888 0 0 1 41.33 48.623 Q 41.695 50.323 41.775 52.294 A 27.764 27.764 0 0 1 41.797 53.418 A 18.367 18.367 0 0 1 40.479 60.254 Q 39.16 63.574 36.768 66.26 A 20.121 20.121 0 0 1 32.369 69.933 A 23.913 23.913 0 0 1 30.859 70.801 A 22.111 22.111 0 0 1 25.58 72.748 A 27.333 27.333 0 0 1 22.852 73.242 L 22.852 63.867 A 11.995 11.995 0 0 0 26.767 62.205 Q 30.859 59.436 30.859 53.223 A 8.538 8.538 0 0 0 30.398 50.366 A 7.423 7.423 0 0 0 28.613 47.559 A 21.582 21.582 0 0 0 26.095 45.419 Q 24.637 44.351 22.852 43.359 Z M 18.848 0.293 L 18.848 10.547 A 10.816 10.816 0 0 0 13.672 14.307 A 11.279 11.279 0 0 0 12.383 16.412 A 7.838 7.838 0 0 0 11.621 19.727 A 11.529 11.529 0 0 0 11.909 22.377 A 8.018 8.018 0 0 0 13.672 25.879 Q 15.723 28.223 18.848 29.98 L 18.848 41.113 A 122.252 122.252 0 0 1 12.402 37.744 A 30.635 30.635 0 0 1 6.543 33.496 Q 3.906 31.055 2.197 27.832 A 14.194 14.194 0 0 1 0.815 23.805 Q 0.489 22.084 0.488 20.121 A 18.414 18.414 0 0 1 0.488 20.117 A 21.655 21.655 0 0 1 0.902 15.8 A 17.39 17.39 0 0 1 1.953 12.402 Q 3.418 8.984 5.908 6.396 A 18.652 18.652 0 0 1 11.768 2.295 A 25.204 25.204 0 0 1 18.848 0.293 Z M 0 68.359 L 2.051 59.961 A 15.125 15.125 0 0 0 3.179 60.54 Q 3.821 60.838 4.574 61.129 A 30.875 30.875 0 0 0 5.518 61.475 A 75.688 75.688 0 0 0 9.863 62.842 A 44.628 44.628 0 0 0 14.355 63.867 A 27.228 27.228 0 0 0 16.79 64.183 A 21.579 21.579 0 0 0 18.555 64.258 L 18.848 64.258 L 18.848 73.535 L 18.652 73.535 A 48.95 48.95 0 0 1 14.439 73.348 A 54.064 54.064 0 0 1 13.818 73.291 A 39.491 39.491 0 0 1 8.789 72.461 A 26.333 26.333 0 0 1 3.955 70.85 A 16.742 16.742 0 0 1 1.454 69.477 A 13.867 13.867 0 0 1 0 68.359 Z M 148.145 50.293 L 161.23 50.293 L 164.063 58.203 L 145.41 58.203 L 148.145 50.293 Z M 252.344 50.293 L 265.43 50.293 L 268.262 58.203 L 249.609 58.203 L 252.344 50.293 Z M 22.852 9.863 L 22.852 0 Q 27.148 0.098 31.592 0.928 A 27.576 27.576 0 0 1 34.684 1.681 Q 36.206 2.152 37.455 2.773 A 13.713 13.713 0 0 1 38.77 3.516 A 61.046 61.046 0 0 1 38.135 4.846 A 82.043 82.043 0 0 1 37.402 6.299 A 1879.078 1879.078 0 0 1 36.646 7.764 A 1530.309 1530.309 0 0 1 35.938 9.131 A 134.787 134.787 0 0 1 35.608 9.763 Q 35.139 10.655 34.777 11.307 A 46.756 46.756 0 0 1 34.766 11.328 Q 34.357 12.063 34.222 12.252 A 0.454 0.454 0 0 1 34.18 12.305 A 3.654 3.654 0 0 1 33.821 12.136 Q 33.639 12.039 33.435 11.91 A 9.26 9.26 0 0 1 33.008 11.621 A 4.862 4.862 0 0 0 32.469 11.291 Q 32.178 11.136 31.825 10.987 A 12.387 12.387 0 0 0 31.055 10.693 A 12.709 12.709 0 0 0 30.006 10.384 Q 29.053 10.144 27.832 9.961 A 14.731 14.731 0 0 0 26.733 9.841 Q 25.531 9.752 24.02 9.805 A 39.391 39.391 0 0 0 22.852 9.863 Z" vector-effect="non-scaling-stroke"></path>
                </g>
            </svg>
            <p class="fst-italic mb-5 mt-2" id="subtitle" style="font-size: larger;">Sistema de soporte para Vulnerabilidades y Amenazas basado en Inteligencia Artificial</p>
        </div>
        <div class="row d-flex flex-row justify-content-center">
            <div class=" col-md-6 d-flex justify-content-center "><div class="card text-white bg-secondary mb-3 sombra" id="tarjeta-hero">
                {% if session.user %}
                    <a href="{{ url_for('proyecto') }}" style="text-decoration: none; color: inherit; ">
                {% else %}
                    <a href="{{ url_for('login') }}" style="text-decoration: none; color: inherit; ">
                {% endif %}
                        <div class="card-body ">
                            <h4 class="card-title">¡Comienza ya!</h4>
                            <p class="card-text">Sube tu proyecto y comienza a recibir sugerencias sobre seguridad por parte de nuestra Inteligencia Artificial.</p>
                        </div>
                    </a>
              </div></div>
            <div class=" col-md-6 d-flex justify-content-center"><div class="card text-white bg-secondary mb-3 sombra" id="tarjeta-hero">
                <div class="card-body">
                  <h4 class="card-title">Vulnerabilidades</h4>
                  <p class="card-text">Nuestro modelo se basa en miles de vulnerabilidades conocidas y en la información más reciente de la industria.</p>
                </div>
              </div></div>
        </div>
        
    </div>
    <div class="container-fluid m-0 p-0">
        <div class="curved-section align-self-center" style="width: 100%;">
            <svg viewBox="0 -40 2500 180" class="curved-svg">
               <path fill="white" d="M0,-40 C730,40, 1730,40, 2500,-40 L2500,500 L0,500 Z"></path>
            </svg>
        </div>
    </div>
</div>

<div class="container my-5 py-3">
    <div class="row">
        <div class="col-12 col-lg-6 d-flex align-items-center p-5 justify-content-lg-end justify-content-center animate-on-scroll fade-in-left">
            <img src="{{ url_for('static', filename='chatsvaia.png') }}" alt="Imagen chatbot svaia" width="300px" class="sombra">
        </div>
        <div class="col-12 col-lg-6">
            <div class="row pt-2 d-flex align-items-center gap-3 justify-content-lg-start justify-content-center animate-on-scroll fade-in-right">
                <div class="col-12 col-lg-1 pb-lg-5">
                    <div class="circle">1</div>
                </div>
                <div class="col-6 col-lg-7 mx-2" style="max-width: max-content;">
                    <h4 class="text-primary">Sube tu proyecto</h4>
                    <p class="text-primary">Sube tu archivo y nosotras te lo analizamos</p>
                </div>
            </div>
            <div class="row d-flex align-items-center gap-3 justify-content-lg-start justify-content-center animate-on-scroll fade-in-right" style="transition-delay: 200ms;">
                <div class="col-6 col-lg-1 pb-lg-5">
                    <div class="circle">2</div>
                </div>
                <div class="col-6 col-lg-7 mx-2">
                    <h4 class="text-primary">Recibe sugerencias</h4>
                    <p class="text-primary">Nuestra IA buscará vulnerabilidades que puedan ser de tu interés</p>
                </div>
            </div>
            <div class="row pt-2 d-flex align-items-center gap-3 justify-content-lg-start justify-content-center animate-on-scroll fade-in-right" style="transition-delay: 400ms;">
                <div class="col-6 col-lg-1 pb-lg-5">
                    <div class="circle">3</div>
                </div>
                <div class="col-6 col-lg-7 mx-2">
                    <h4 class="text-primary">Más detalles</h4>
                    <p class="text-primary">Genera un informe o un sbom para obtener más detalles</p>
                </div>
            </div>
        </div>
    </div>
</div>

<section id="non-padding" class="container bg-secondary w-100">
    <div class="curved-sectiow-donw row mb-0 m-0 p-0">
        <svg viewBox="0 -40 2000 80" class="curved-svg">
            <path fill="white" d="M0,40 C480,-40, 1480,-40, 2000,40 L2000,-500 L0,-500 Z"></path>
        </svg>
    </div>

    <div class="row d-flex justify-content-center d-flex align-items-center text-center m-0 p-0">
        <h3 class="m-0 p-0 mb-1">Tabla de precios</h3>
        <p class="mb-5 p-0"><small>Elige la modalidad que mejor se adapte a tus necesidades.</small></p>
    </div>

    <div class="row d-flex justify-content-center align-items-start m-0 p-0 gap-3">
        <div class="col-md-3 d-flex justify-content-md-end justify-content-center align-items-center px-0 animate-on-scroll fade-in-up">
            <div class="card border-light mb-md-5 mb-1 sombra w-100 pb-2" style="max-width: 350px;">
                <div class="card-header bg-primary text-white py-1">Básico</div>
                <div class="card-body pb-0">
                    <h4 class="card-title">0€ <small class="text-body-secondary">/mes</small></h4>
                    <p class="card-text my-0 letra_pequeña"><small>1 proyecto</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>10 sugerencias</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Sin soporte</small></p>
                    </div>
            </div>
        </div>
        
        <div class="col justify-content-center col-md-3 justify-content-center d-flex align-items-center px-0 animate-on-scroll fade-in-up" style="transition-delay: 200ms;">
            <div class="card border-light mb-md-5 mb-1 sombra w-100 pb-2" style="max-width: 350px;">
                <div class="card-header bg-primary text-white py-1">Profesional</div>
                <div class="card-body pb-0">
                    <h4 class="card-title">19,99€ <small class="text-body-secondary">/mes</small></h4>
                    <p class="card-text my-0 letra_pequeña"><small>10 proyectos</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>100 sugerencias</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Soporte por chat</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Acceso a la API</small></p>
                    </div>
            </div>
        </div>

        <div class="col-md-3 d-flex justify-content-md-start justify-content-center align-items-center px-0 py-mb-0 animate-on-scroll fade-in-up" style="transition-delay: 400ms;">
            <div class="card border-light mb-md-5 mb-5 sombra w-100" style="max-width: 350px;">
                <div class="card-header bg-primary text-white py-1">Empresarial</div>
                <div class="card-body pb-2">
                    <h4 class="card-title">49,99€ <small class="text-body-secondary">/mes</small></h4>
                    <p class="card-text my-0 letra_pequeña"><small>100 proyectos</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Sugerencias ilimitadas</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Soporte por chat</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Soporte por teléfono</small></p>
                    <p class="card-text my-0 letra_pequeña"><small>Acceso a la API</small></p>
                    </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // --- Manejo del formulario de login (sin cambios) ---
        const loginForm = document.getElementById("login-form");
        if (loginForm) {
            loginForm.addEventListener("submit", async function (event) {
                event.preventDefault();
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;
                const requestBody = { username: username, password: password };
                try {
                    const response = await fetch('http://localhost:5001/auth', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody),
                        credentials: 'include'
                    });
                    if (response.ok) {
                        const data = await response.json();
                        sessionStorage.setItem('access_token', data.access_token);
                        alert('Login exitoso');
                        window.location.href = '/proyecto';
                    } else {
                        const errorData = await response.json();
                        alert('Credenciales inválidas: ' + errorData.message);
                    }
                } catch (error) {
                    console.error('Error en la solicitud de login:', error);
                    alert('Hubo un problema al intentar iniciar sesión');
                }
            });
        }
    
        // --- Lógica de animación para todos los elementos ---
        const animatedElements = document.querySelectorAll(".animate-on-scroll");
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                // Cuando el elemento es visible en la pantalla
                if (entry.isIntersecting) {
                    entry.target.classList.add("visible");
                }
            });
        }, {
            threshold: 0.1 // La animación se dispara cuando el 10% del elemento es visible
        });
    
        // Observar cada elemento que debe ser animado
        animatedElements.forEach((element) => {
            observer.observe(element);
        });
    });
</script>
    
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>